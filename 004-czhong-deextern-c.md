#### 一、extern "C" , 指明那些C++代码需要采用C语言方式编译(或者完全兼容C)

<br>

**1、被 'extern "C" 修饰的代码会按照C语言的方式去编译,或者说被extern "C" 修饰的代码是按照C语言的标准编写的 **
**2、'extern "C" 主要有4使用使用方式**

**方式一:**
单个方法需要采用C语言方式编译(定义函数时就指明)

![](/assets/Snip20190110_1.png)

**方式二: **
有一部分的C++代码需要采用C语言方式编译, 那么使用extern "C" 花括号{} 括起来

![](/assets/Snip20190110_3.png)

**方式三: **
如果声明和实现是分开的, 那么只需在声明部分用 extern "C" 指明采用C语言方式编译部分即可 

![](/assets/Snip20190110_4.png)

**方式四: C/ C++混编**

![](/assets/Snip20190110_7.png)



here

**☆☆☆☆☆**
**3、什么情况下会用到 extern "C" ?**
   
1> 当我们在 C++ 中编写一些函数,并且希望这些函数以后可以在C语言环境中使用时, 需要使用 **extern "C"** 指明.
2> 当我们已经在C 语言文件(环境) 中编写好函数, 现在希望把已经编写好的函数用在 C++ 语言(环境中时) 需要将C语言的头文件使用 extern "C" 花括号{} 包起来.
3> 凡是 涉及到C / C++ 混编的时候都要使用  **extern "C"

**☆☆☆☆☆**
**4、为什要使用 extern "C" ?**
1> 比如在编写 C++ 代码时, 其中保函了C++ 的特性(比如: 函数重载/引用等等), 这些特性在C语言中是没有的, 那么这个C++代码就不能用在C语言环境, 因此使用 **extern "C" **就是说明,我们在编写这段代码是不能包含C++有而C没有的特性或者说这段代码是完全兼容C的.

(C++函数重载的本质是使用 name mangling技术(函数名装饰)) 
比如: 在C++ 中有个 `int sum(int a, int b)` 函数, C++ 编译后真实的名称可能是 `sum_int_int`,而在C语言中因为没有函数重载的概念,在C语言环境下编译后函数名为 `_sum`
如果我们编写一个C语言函数明文: `int sum(int a, int b)` ,直接在C++中使用,那么因为C++中有函数重载,C++环境会去找名为 sum_int_int的函数,肯定找不到,系统报错. 因此在导入时 我们使用extern "C" 说明, sum 这个函数是C语言中的,不要使用函数重载(name mangling) 技术来调用


**☆☆☆☆☆**
**5、编写通用的C语言文件,完全兼容C++ ?**
![](/assets/Snip20190110_8.png)







